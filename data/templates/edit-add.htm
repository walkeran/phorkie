{% include 'edit-file.htm' with {'file': null, 'fileid': 'new', 'newfile': true} %}

<script type="application/javascript">
$(document).ready(function() {
    $('#add-button').show();
    $('#filegroupnew').hide();
    $('#add-button').bind('click', function() {
        $('.filegroup:last').before("{% filter escape('js') %}
            {% include 'edit-file.htm' with {'file': null, 'fileid': '###', 'newfile': true} %}
            {% endfilter %}"
            .replace(/###/g, $('.filegroup').length)
        );
        toggleAdditional($('.filegroup:visible .additional-btn:last')[0], 0);
        jQuery($('.filegroup:visible .additional-btn:last')[0]).show();

        $('html, body').animate({
            scrollTop: $('.filegroup:visible:last').offset().top
        });
        $('.filegroup:visible:last textarea').focus();
        return false;
    });
});
</script>
